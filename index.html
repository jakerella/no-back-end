<!doctype html>
<html lang='en'>

    <head>
        <meta charset='utf-8'>

        <title>Look Ma, No Server!</title>

        <meta name='description' content='Testing Front End Code Without a Server'>
        <meta name='author' content='Jordan Kasper'>

        <meta name='apple-mobile-web-app-capable' content='yes' />
        <meta name='apple-mobile-web-app-status-bar-style' content='black-translucent' />

        <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no'>

        <link rel='stylesheet' href='node_modules/reveal.js/css/reveal.min.css'>
        <link rel='stylesheet' href='sky-jordan.css' id='theme'>

        <!-- For syntax highlighting -->
        <link rel='stylesheet' href='tomorrow.css'>
        <!-- My own stuff... -->
        <link rel='stylesheet' href='custom.css'>


        <!-- If the query includes 'print-pdf', include the PDF print sheet -->
        <script>
            if( window.location.search.match( /print-pdf/gi ) ) {
                var link = document.createElement( 'link' );
                link.rel = 'stylesheet';
                link.type = 'text/css';
                link.href = 'node_modules/reveal.js/css/print/pdf.css';
                document.getElementsByTagName( 'head' )[0].appendChild( link );
            }
        </script>

        <!--[if lt IE 9]>
        <script src='node_modules/reveal.js/lib/js/html5shiv.js'></script>
        <![endif]-->
    </head>

    <body>

        <div class='reveal'>

            <!-- Any section element inside of this container is displayed as a slide -->
            <div class='slides'>


                <!-- The Introduction -->

                <section data-background='images/Alice_mock_turtle_cropped.png'>
                    <aside class='title-text'>
                        <h2>Look Ma, No Server!</h2>
                        <h3>Testing Front End Code Without a Server</h3>
                        <h4>Jordan Kasper</h4>
                    </aside>

                    <aside class='notes'>
                        <p>
                            Then the Queen left off, quite out of breath, and said to Alice, "Have you seen the Mock Turtle yet?"<br>
                            "No," said Alice. "I don't even know what a Mock Turtle is."<br>
                            "It's the thing Mock Turtle Soup is made from," said the Queen.<br>
                            -- From Alice's Adventures in Wonderland, Chapter 9
                        </p>
                    </aside>
                </section>

                <section>
                    <img src='images/hobbes_large_trans.png' alt='Hobbes'>
                </section>
                <section>
                    <img src='images/nomad-js.png' style='width:25%;' alt='NomadJS'>
                </section>


                <!-- The Situation -->

                <section>
                    <h1>The Situation:</h1>
                </section>

                <section>
                    <h3>You have a data-driven appication...</h3>

                    <h3 class='fragment' style='margin-top:1em;'>...with a service-oriented architecture.</h3>
                </section>

                <section>
                    <img alt='Diagram of data services architecture' src='images/data_services.png'>
                    <cite>http://www.compositesw.com/data-virtualization/data-services/</cite>
                </section>

                <section data-background='#fcfcb0'>
                    <h4>Service-Oriented Architecture</h4>
                    <img alt='The Blind Men and the Elephant' src='images/elephant.gif'>
                    <cite>http://msdn.microsoft.com/en-us/library/bb833022.aspx</cite>

                    <aside class='notes'>
                        John Godfrey Saxe's poem "The blind men and the elephant". Six blind men from Indostan 
                        encounter an elephant â€“ each of the men then describes the elephant a bit differently 
                        because they are influenced by their individual experiences.
                    </aside>
                </section>

                <section>
                    <h3>And you have JavaScript tests...</h3>

                    <pre class='fragment'><code data-trim>
// /test/front-end.js

// Note to future self: write tests.

// Note from future self: thanks, jerk.
                    </code></pre>
                </section>

                <section data-background='#fff'>
                    <h3 style='font-size:1.2em;'>You <em>want</em> to have JavaScript Tests...</h3>
                    <img src='images/disapproval.png' alt='Look of disapproval' style='width:40%;'>
                </section>
                
                <section>
                    <h3>Web Application Testing</h3>

                    <img alt='Nested Russian dolls' src='images/nested_dolls.png'>

                    <cite>http://www.aventure.ac.in/the-russian-riddle/</cite>
                </section>

                <section data-background='#eff' data-transition='fade'>
                    <img alt='Web app flow diagram' src='images/async-flow.png'>
                </section>

                <section data-background='#eff' data-transition='fade'>
                    <img alt='Web app flow diagram - no server' src='images/async-flow-no-server.png'>
                </section>


                <!-- The Plan -->

                <section>
                    <h1>The Plan:</h1>
                </section>

                <section>
                    <h2>Goals...</h2>

                    <ol>
                        <li class='fragment'>Test our client application code</li>
                        <li class='fragment'>No changes to our server application</li>
                        <li class='fragment'>Handle successes <strong>and</strong> errors</li>
                        <li class='fragment'>Test both expected and unexpected data</li>
                    </ol>
                </section>

                <section>
                    <h2>How do we do that?</h2>
                </section>

                <section data-background='images/hijack.jpg'>
                    <h1 style='color:white; font-weight:bold; font-style:italic; position:relative; bottom:-1.7em; font-family:arial;'>
                        Ajax
                    </h1>

                    <aside class='notes'>
                        This is an actual movie (minus the "Ajax" bit):<br>
                        After the passing away of his wife, Pooja, Delhi-based Vikram Madan, enrolls his daughter, 
                        Priya, in a boarding school in Amritsar, and re-locates to work as a Mechanic at Chandigarh 
                        Airport. His daughter informs him that she is on her way to Amritsar on a hostel-trip on 
                        Indian Airlines Flight IC147. Shortly thereafter, Vikram will be informed that the flight 
                        has been hijacked to Dubai by Islamic terrorists, who want the Indian government to release 
                        one of their comrades, Rashid Omar, or else they will start killing the passengers and crew 
                        one by one at half-hour intervals.
                    </aside>
                </section>

                <section data-background='#eff' data-transition='fade'>
                    <img alt='Web app flow diagram' src='images/async-flow.png'>
                </section>

                <section data-background='#eff' data-transition='fade'>
                    <img alt='Async mocking diagram' src='images/async-mock.png'>
                </section>

                <section data-background='images/mockingjay.jpg' class='outline'>
                    <h3 style='font-weight:bold;font-family:arial,sans-serif;'>The Hunger Tests: Mockingdata</h3>

                    <ol style='margin-top:2em;'>
                        <li class='fragment'>Intercept the XMLHttpRequest</li>
                        <li class='fragment'>Inspect the URL, headers, and data</li>
                        <li class='fragment'>Execute callbacks with mock data</li>
                    </ol>

                    <cite style='bottom:-11em;'>http://www.imdb.com/media/rm550033152/tt1951265?ref_=ttmd_md_pv</cite>
                </section>


                <!-- The Execution -->

                <section>
                    <h1 style='font-size:2.8em;'>The Execution:</h1>
                </section>

                <section>
                    <h2>Tools Galore</h2>

                    <ul>
                        <li class='fragment'><a href='https://github.com/jakerella/jquery-mockjax'>jQuery Mockjax</a></li>
                        <li class='fragment'><a href='https://docs.angularjs.org/api/ngMock/service/$httpBackend'>Angular $httpBackend (ng-mocks)</a></li>
                        <li class='fragment'><a href='https://github.com/pivotal/jasmine-ajax'>Jasmine.Ajax</a></li>
                        <li class='fragment'><a href='http://sinonjs.org/docs/#server'>Sinon</a></li>
                    </ul>
                </section>

                <section>
                    <h2>What should I use?</h2>

                    <h4 class='fragment' style='margin-top:1em;'>Whatever makes your workflow easier.</h4>
                </section>

                <section data-background='#fff'>
                    <h3>Not Helpful.</h3>

                    <img src='images/disapproval.png' alt='Look of disapproval' style='width:30%;'>

                    <h2 class='fragment' style='margin-top:2em;'>Yes, it is.</h2>
                </section>

                <section>
                    <h2>Let's look at some sample code...</h2>
                </section>

                <section data-background='images/beer.png'>
                    <h2>Beer</h2>

                    <p class='fragment' style='margin-top:1em;'>Search for a beer</p>
                    <p class='fragment'>Mark a beer as a "favorite"</p>
                    <p class='fragment'>Rate a beer</p>

                    <cite style='right:0;left:auto;bottom:-10em;'>http://pngimg.com/download/2330</cite>
                </section>

                <section>
                    <pre><code data-srcbyline='beer.js?1-3;19-21;37-39;56-57;71-73'></code></pre>
                </section>

                <section>
                    <pre><code data-srcbyline='beer.js?3-19'></code></pre>
                </section>

                <section>
                    <h2>Pseudo Tests</h2>
                    <p>Just like real tests, except that they actually pass.</p>

                    <pre class='fragment'><code data-trim data-srcbyline='fasdf'>
[pseudo test code]
                    </code></pre>
                </section>

                <section>
                    <h2>Idemopotency</h2>
                    <p>Just like real potency, only idemo.</p>
                </section>

                <section>
                    <pre><code data-trim>
[pseudo setup and breakdown code]
                    </code></pre>
                </section>

                <section>
                    <pre><code data-trim>
[pseudo ajax intecepting code]
                    </code></pre>
                </section>

                <section>
                    <h3>That's great, but I don't live in the pseudo world...</h3>

                    <p style='margin-top:4em;' class='fragment'>...or do you?</p>
                </section>

                <section>
                    <h3>jQuery Mockjax</h3>
                    <pre><code data-trim>
[mockjax code - basic success]
                    </code></pre>
                </section>

                <section>
                    <pre><code data-trim>
[mockjax code - basic 500]
                    </code></pre>
                </section>

                <section>
                    <h3>jQuery Mockjax</h3>
                    <pre><code data-trim>
[mockjax code - custom response method]
                    </code></pre>
                </section>

                <section>
                    <h3>Angular $httpBackend</h3>
                    <pre><code data-trim>
[angular code]
                    </code></pre>
                </section>

                <section>
                    <h3>Jasmine.ajax</h3>
                    <pre><code data-trim>
[jasmine code]
                    </code></pre>
                </section>

                <section>
                    <h3>Sinon</h3>
                    <pre><code data-trim>
[sinon code]
                    </code></pre>
                </section>


                <!-- The Conclusion -->

                <section>
                    <h2>Wrapping Things Up</h2>

                    <ul>
                        <li class='fragment'>Test your JavaScript code</li>
                        <li class='fragment'>Don't rely on external services (even your own)</li>
                        <li class='fragment'>Find a library that works for you</li>
                    </ul>
                </section>

                <section>
                    <h1>Thank You!</h1>
                    <h3>Look Ma, No Server</h3>
                    <h4>Testing Front End Code Without a Server</h4>
                    <p style='margin-top:2em;'>
                        Jordan Kasper<br>
                        <a href='http://twitter.com/jakerella'>@jakerella</a> | <a href='#'>bit.ly/[LINK]</a>
                    </p>
                </section>

            </div>

        </div>

        <script src='node_modules/reveal.js/lib/js/head.min.js'></script>
        <script src='node_modules/reveal.js/js/reveal.min.js'></script>

        <script>
        // Full list of configuration options available here:
        // https://github.com/hakimel/reveal.js#configuration
        Reveal.initialize({
            controls: false,
            progress: false,
            history: true,
            center: true,
            transition: 'linear',
            backgroundTransition: 'slide',

            // Optional libraries used to extend on reveal.js
            dependencies: [
                { src: 'node_modules/reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
                { src: 'node_modules/reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'node_modules/reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
                { src: 'node_modules/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
                { src: 'node_modules/reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } },
                { src: 'node_modules/source-by-line/srcByLine.js', async: true, callback: function() { window.srcbyline.init(); } }
            ]
        });
        </script>

    </body>
</html>
